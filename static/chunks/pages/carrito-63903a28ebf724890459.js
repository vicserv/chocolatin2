(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[993],{6156:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},6664:function(e,t,n){!function(e,t){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function o(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i(e,t){return a(e)||c(e,t)||s(e,t)||l()}function a(e){if(Array.isArray(e))return e}function c(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(s){o=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){return e(t={exports:{}},t.exports),t.exports}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var p="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function f(){}function m(){}m.resetWarningCache=f;var y=function(){function e(e,t,n,r,o,i){if(i!==p){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:m,resetWarningCache:f};return n.PropTypes=n,n},v=d((function(e){e.exports=y()})),h=function(e){return null!==e&&"object"===n(e)},b=function(e){return h(e)&&"function"===typeof e.then},j=function(e){return h(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},g="[object Object]",x=function e(t,n){if(!h(t)||!h(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var o=Object.prototype.toString.call(t)===g;if(o!==(Object.prototype.toString.call(n)===g))return!1;if(!o&&!r)return!1;var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(var c={},s=0;s<i.length;s+=1)c[i[s]]=!0;for(var u=0;u<a.length;u+=1)c[a[u]]=!0;var l=Object.keys(c);if(l.length!==i.length)return!1;var d=t,p=n,f=function(t){return e(d[t],p[t])};return l.every(f)},_=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},E="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",C=function(e){if(null===e||j(e))return e;throw new Error(E)},O=function(e){if(b(e))return{tag:"async",stripePromise:Promise.resolve(e).then(C)};var t=C(e);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},w=t.createContext(null);w.displayName="ElementsContext";var S=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},N=function(e){var n=e.stripe,r=e.options,o=e.children,a=t.useRef(!1),c=t.useRef(!0),s=t.useMemo((function(){return O(n)}),[n]),u=i(t.useState((function(){return{stripe:null,elements:null}})),2),l=u[0],d=u[1],p=_(n),f=_(r);return null!==p&&(p!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it."),x(r,f)||console.warn("Unsupported prop change on Elements: You cannot change the `options` prop after setting the `stripe` prop.")),a.current||("sync"===s.tag&&(a.current=!0,d({stripe:s.stripe,elements:s.stripe.elements(r)})),"async"===s.tag&&(a.current=!0,s.stripePromise.then((function(e){e&&c.current&&d({stripe:e,elements:e.elements(r)})})))),t.useEffect((function(){return function(){c.current=!1}}),[]),t.useEffect((function(){var e=l.stripe;e&&e._registerWrapper&&e._registerWrapper({name:"react-stripe-js",version:"1.4.0"})}),[l.stripe]),t.createElement(w.Provider,{value:l},o)};N.propTypes={stripe:v.any,options:v.object};var P=function(e){var n=t.useContext(w);return S(n,e)},T=function(){return P("calls useElements()").elements},A=function(){return P("calls useStripe()").stripe},k=function(e){return(0,e.children)(P("mounts <ElementsConsumer>"))};k.propTypes={children:v.func.isRequired};var R=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),function(){n.current&&n.current.apply(n,arguments)}},I=function(e){return h(e)?(e.paymentRequest,o(e,["paymentRequest"])):{}},L=function(){},M=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},B=function(e,n){var r="".concat(M(e),"Element"),o=n?function(e){P("mounts <".concat(r,">"));var n=e.id,o=e.className;return t.createElement("div",{id:n,className:o})}:function(n){var o=n.id,i=n.className,a=n.options,c=void 0===a?{}:a,s=n.onBlur,u=void 0===s?L:s,l=n.onFocus,d=void 0===l?L:l,p=n.onReady,f=void 0===p?L:p,m=n.onChange,y=void 0===m?L:m,v=n.onEscape,h=void 0===v?L:v,b=n.onClick,j=void 0===b?L:b,g=P("mounts <".concat(r,">")).elements,_=t.useRef(null),E=t.useRef(null),C=R(f),O=R(u),w=R(d),S=R(j),N=R(y),T=R(h);t.useLayoutEffect((function(){if(null==_.current&&g&&null!=E.current){var t=g.create(e,c);_.current=t,t.mount(E.current),t.on("ready",(function(){return C(t)})),t.on("change",N),t.on("blur",O),t.on("focus",w),t.on("escape",T),t.on("click",S)}}));var A=t.useRef(c);return t.useEffect((function(){A.current&&A.current.paymentRequest!==c.paymentRequest&&console.warn("Unsupported prop change: options.paymentRequest is not a customizable property.");var e=I(c);0===Object.keys(e).length||x(e,I(A.current))||_.current&&(_.current.update(e),A.current=c)}),[c]),t.useLayoutEffect((function(){return function(){_.current&&_.current.destroy()}}),[]),t.createElement("div",{id:o,className:i,ref:E})};return o.propTypes={id:v.string,className:v.string,onChange:v.func,onBlur:v.func,onFocus:v.func,onReady:v.func,onClick:v.func,options:v.object},o.displayName=r,o.__elementType=e,o},D="undefined"===typeof window,q=B("auBankAccount",D),U=B("card",D),Z=B("cardNumber",D),W=B("cardExpiry",D),X=B("cardCvc",D),F=B("fpxBank",D),$=B("iban",D),G=B("idealBank",D),Y=B("p24Bank",D),z=B("epsBank",D),H=B("paymentRequestButton",D),Q=B("afterpayClearpayMessage",D);e.AfterpayClearpayMessageElement=Q,e.AuBankAccountElement=q,e.CardCvcElement=X,e.CardElement=U,e.CardExpiryElement=W,e.CardNumberElement=Z,e.Elements=N,e.ElementsConsumer=k,e.EpsBankElement=z,e.FpxBankElement=F,e.IbanElement=$,e.IdealBankElement=G,e.P24BankElement=Y,e.PaymentRequestButtonElement=H,e.useElements=T,e.useStripe=A,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(7294))},2355:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var r=n(5893),o=n(7294),i=o.createContext();function a(e){var t=e.children,n=(0,o.useState)([]),a=n[0],c=n[1];return(0,r.jsx)(i.Provider,{value:{Tienda:a,setTienda:c},children:t})}t.Z=i},5031:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(5893),o=n(7294),i=n(2355),a=n(9426),c=n.n(a);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){var t=e.producto,n=(0,o.useContext)(i.Z),a=n.Tienda,s=n.setTienda;return(0,r.jsxs)("div",{className:c().lista,children:[(0,r.jsx)("div",{className:c().lista__imagen,style:{backgroundImage:"url(".concat(t.imagen,")")}}),(0,r.jsx)("div",{className:c().lista__boton,onClick:function(){return function(e){var n=a.findIndex((function(t){return t.id===e})),r=u(a);t.cantidad>1&&(r[n].cantidad--,s(r))}(t.id)},children:"-"}),(0,r.jsxs)("div",{className:c().lista__producto,children:["PCS: ",t.cantidad]}),(0,r.jsx)("div",{className:c().lista__boton,onClick:function(){return function(e){var t=a.findIndex((function(t){return t.id===e})),n=u(a);n[t].cantidad++,s(n)}(t.id)},children:"+"}),(0,r.jsxs)("div",{className:c().lista__precio,children:["PRECIO: $",t.precio," MXN"]}),(0,r.jsx)("div",{className:c().lista__producto,children:t.nombre}),(0,r.jsx)("div",{className:c().lista__productos,onClick:function(){return function(e){var t=a.filter((function(t){return t.id!==e}));s(t)}(t.id)},children:"Eliminar"}),(0,r.jsxs)("div",{className:c().lista__producto,children:["TOTAL: $",t.cantidad*t.precio," MXN"]})]})}var d=n(6156),p=n(7757),f=n.n(p),m=n(2137),y="https://js.stripe.com/v3",v=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,h="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",b=null,j=function(e){return null!==b?b:b=new Promise((function(t,n){if("undefined"!==typeof window)if(window.Stripe&&e&&console.warn(h),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(y,'"]')),t=0;t<e.length;t++){var n=e[t];if(v.test(n.src))return n}return null}();r&&e?console.warn(h):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(y).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(o){return void n(o)}else t(null)}))},g=function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.14.0",startTime:t})}(r,n),r},x=Promise.resolve().then((function(){return j(null)})),_=!1;x.catch((function(e){_||console.warn(e)}));var E=n(6664),C=n(9669),O=n.n(C);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];_=!0;var r=Date.now();return x.then((function(e){return g(e,t,r)}))}("pk_test_51IQM8KDwdATUt06EVfL4MZKYq4sX1mHQuqCXXvwP5t7tZksKnAbLeqgUHJx32NWTdZbMybhBPjsvUjxmDz8ZxpMU004prQkpoA"),P=function(e){var t=e.datos,n=e.tienda,o=e.pago,i=e.domicilio,a=(0,E.useStripe)(),c=(0,E.useElements)(),s=function(){var e=(0,m.Z)(f().mark((function e(r){var s,u,l,d,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,a.createPaymentMethod({type:"card",card:c.getElement(E.CardElement),billing_details:{address:{city:t.ciudad,country:null,line1:t.direccion,line2:t.numero,postal_code:t.cp,state:t.estado},email:t.email,name:t.nombre,phone:t.telefono}});case 3:if(s=e.sent,u=s.error,l=s.paymentMethod,u){e.next=13;break}return d=l.id,e.next=10,O().post("https://api.elchocolatin.com/",{id:d,amount:100*o,description:"".concat(!0===i?"*ENTREGA A DOMICILIO*":"*ENTREGA EN TIENDA*"," ||, ").concat(n.map((function(e){return"".concat(e.cantidad," * ").concat(e.nombre,", SUBTOTAL: ").concat(e.cantidad*e.precio," ||  ")})))});case 10:p=e.sent,p.data,alert("pago realizado con exito, enviamos tu factura a tu correo");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.jsxs)("form",{onSubmit:s,children:[(0,r.jsx)(E.CardElement,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}}),(0,r.jsx)("button",{children:"Comprar"})]})};function T(e){var t=e.tienda,n=e.pago,i=e.domicilio,a=(0,o.useState)({nombre:"",direccion:"",numero:"",ciudad:"",estado:"",cp:"",telefono:"",email:""}),s=a[0],u=a[1],l=function(e){u(S(S({},s),{},(0,d.Z)({},e.target.name,e.target.value)))};return(0,r.jsxs)("div",{className:c().datosenvio,children:[(0,r.jsx)("h3",{className:c().datosenvio__titulo,children:"Informacion de Envio"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Nombre"}),(0,r.jsx)("input",{type:"text",onChange:l,name:"nombre"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Direccion"}),(0,r.jsx)("input",{type:"text",onChange:l,name:"direccion"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Numero"}),(0,r.jsx)("input",{type:"number",onChange:l,name:"numero"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Ciudad"}),(0,r.jsx)("input",{type:"text",onChange:l,name:"ciudad"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Estado"}),(0,r.jsx)("input",{type:"text",onChange:l,name:"estado"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Codigo Postal (CP)"}),(0,r.jsx)("input",{type:"number",onChange:l,name:"cp"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Telefono"}),(0,r.jsx)("input",{type:"number",onChange:l,name:"telefono"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Correo Electronico"}),(0,r.jsx)("input",{type:"email",onChange:l,name:"email"})]}),(0,r.jsx)("h3",{className:c().datosenvio__titulo,children:"Informacion de Pago"}),(0,r.jsx)("label",{children:"Tarjeta de Debito/ Credito"}),(0,r.jsx)("div",{children:"Ingrese Numero de Tarjeta, Mes y A\xf1o, CVC, y Codigo Postal"}),(0,r.jsx)("div",{className:c().tarjeta,children:(0,r.jsx)(E.Elements,{stripe:N,children:(0,r.jsx)(P,{datos:s,tienda:t,pago:n,domicilio:i})})})]})}function A(){var e=(0,o.useContext)(i.Z),t=e.Tienda,n=(e.setTienda,(0,o.useState)(!0)),a=n[0],s=n[1],u=(0,o.useState)({totalEnvio:250,total:0}),d=u[0],p=u[1];return(0,o.useEffect)((function(){!function(){var e=t.reduce((function(e,t){return e+t.precio*t.cantidad}),0);d.totalEnvio,p(!0===a?e<=1e3?{totalEnvio:260,total:e}:{totalEnvio:360,total:e}:{totalEnvio:0,total:e})}()}),[t,a]),(0,r.jsxs)("div",{className:c().carro,children:[(0,r.jsx)("h2",{children:"Mi carrito de compras"}),0===t.length?"AGREGA PRODUCTOS AL CARRITO":(0,r.jsxs)(r.Fragment,{children:[t.map((function(e){return(0,r.jsx)(l,{producto:e},e.id)})),(0,r.jsxs)("div",{className:c().precios,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{children:"Este es el total de tu compra- Selecciona envio a Domicilio o entrega en tienda"}),(0,r.jsx)("h3",{children:!0===a?"Costo de envio: $ ".concat(d.totalEnvio," MXN"):"El producto sera entregado en tienda"}),(0,r.jsxs)("h3",{children:["Costo total: $ ",d.total+d.totalEnvio," MXN"]}),(0,r.jsx)("button",{onClick:function(){s(!a)},children:"A Domicilio / Entrega en tienda"})]}),(0,r.jsx)(T,{tienda:t,pago:d.total+d.totalEnvio,domicilio:a,className:c().precios})]})]})]})}function k(){return(0,r.jsx)(A,{})}},2993:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/carrito",function(){return n(5031)}])},9426:function(e){e.exports={carro:"Lista_carro__qQUcq",lista:"Lista_lista__1C4_l",lista__boton:"Lista_lista__boton__3Ol8u",lista__imagen:"Lista_lista__imagen__30iO0",lista__productos:"Lista_lista__productos__3ZBGH",datosenvio:"Lista_datosenvio__13TdO",datosenvio__titulo:"Lista_datosenvio__titulo__-gWrx",precios:"Lista_precios__1xLD7",tarjeta:"Lista_tarjeta__3CJNm"}}},function(e){e.O(0,[774,351,269],(function(){return t=2993,e(e.s=t);var t}));var t=e.O();_N_E=t}]);